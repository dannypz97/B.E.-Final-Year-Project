@app.route('/question/add/', methods=['GET','POST'])
def add_questions():
    mydb, cursor = classifier.connect_to_db()
    msg = []
    if request.method == 'POST':
        question = str(request.form.get('question'))
        question = classifier.clean_str(question)
        tags = str(request.form.get('tags'))

        question_addable = True #can question and tags be added to db

        if len(question.strip())<10:
            msg.append("Question should be a minimum of 10 characters.")
            question_addable = False
        if len(tags.strip())==0:
            msg.append("No tags were specified.")
            question_addable = False

        if question_addable is True:
            sql = "INSERT INTO " + table + "(question, tags) VALUES (%s, %s)"
            print(question, tags)
            cursor.execute(sql, (question, tags))
            mydb.commit()

            lemmatizer = WordNetLemmatizer()
            #check for word missing in vocab
            for word in question.split(' '):
                if lemmatizer.lemmatize(word) not in embeddings_index:
                    msg.append(word + " not in vocabulary.")
            msg.append("Question added to database.")

    cursor.execute("select tags from " + table)
    tags = list(tag for tag in cursor.fetchall())

    processed_tags = set()

    for ele in tags:
        if ',' not in ele[0]:
            processed_tags.add(ele[0])
        else:
            for tag in ele[0].split(','):
                processed_tags.add(tag.strip())

    del mydb
    del cursor
    return render_template('add.html', embeddings_index = embeddings_index, tags = processed_tags, msg=msg)
